{% block body %}
	<div class="align-items-center card text-white bg-secondary my-5 py-4 text-center mydropzone">
		<div class="card-header">
			<div class="row">

				<div class="col-6">
					<div class="card-body">
						<p class="text-white m-0">
							Ajouter des fichiers :
						</p>
						<form id="upload-form" action="{{path('app_generic_upload_files')}}" method="POST" enctype="multipart/form-data">
							<div class="fallback">
								<input name="file" type="file">
								<div class="mb-3">
									<label for="newFileName" class="form-label">Nom du fichier :</label>
									<input type="text" class="form-control" id="newFileName" name="newFileName" placeholder="Entrer un nouveau nom de fichier (optionnel)">
								</div>
								<div class="row">
									<div class="col-md-4 col-sm-12">
										<label for="button">Bouton :</label>
									</div>
									<div class="col-md-8 col-sm-12">
										<select name="button" id="button" class="form-select">
											{% for button in buttons %}
												<option value="{{button.id}}">{{button.name}}</option>
											{% endfor %}
										</select>
									</div>
								</div>
							</div>
							<div class="d-grid gap-2 d-md-flex justify-content-md-center">
								<button type="submit" class="btn btn-primary">Charger</button>
							</div>

						</form>
					</div>
				</div>
				<div class="col-6">
					{% for button in buttons %}
						{% set matchinguploads = [] %}
						{% for upload in uploads %}
							{% if upload.button.id is same as(button.id)  %}
								{% set matchinguploads = matchinguploads|merge([upload]) %}
							{% endif %}
						{% endfor %}

						{% if matchinguploads|length > 0 %}
							{% for upload in matchinguploads %}
								<div class="d-flex ps-5 mb-5 mt-5 line-list">
									<a href="{{ path('app_download_file', { 'filename': upload.filename }) }}" target="_blank">
										<span class="line-details">
											-{{ upload.filename }}
											<id={{upload.id}}></id>
										</span>
									</a>
									<a href="{{ path('app_delete_file', { filename: upload.filename, button: upload.button.id }) }}">
										<span class="line-details">
											- Supprimer
											<id={{upload.id}}></id>
										</span>
									</a>
								</div>
							{% endfor %}

						{% else %}
							<div class="alert alert-danger">
								<a href="{{path('app_base')}}">
									Il n'y a pas de documents disponible pour cette ligne.
								</a>
							</div>
						{% endif %}
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
