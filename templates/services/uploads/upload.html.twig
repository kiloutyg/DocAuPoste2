{% block body %}
	{{dump(app.session)}}
	{{dump(app.user)}}
	{% if users is defined %}
		{{ dump(users) }}
	{% endif %}
	{% if app.user is not empty %}
		{{dump(app.user.roles)}}
	{% endif %}
	{% if zone is defined %}
		{{dump(zone)}}
	{% endif %}
	{% if productLine is defined %}
		{{dump(productLine)}}
	{% endif %}
	{% if category is defined %}
		{{dump(category)}}
	{% endif %}
	{% if button is defined %}
		{{dump(button)}}
	{% endif %}
	{% if refererUrl is defined %}
		{{dump(refererUrl)}}
	{% endif %}
	<div class="card border-0 shadow rounded-3 my-5 bg-secondary">
		<div class="card-body ">
			<div class="row d-flex align-items-center gy-lg-0 gy-5">

				<div class="col-md-6">
					<p class="text-white m-0">
						Ajouter des fichiers :
					</p>
					<form class="form-floating justify-content-center " id="upload-form" action="{{path('app_generic_upload_files')}}" method="POST" enctype="multipart/form-data">
						<div class="fallback">
							<input name="file" type="file" accept=".pdf" required>
							<div class="mb-3">
								<label for="newFileName" class="form-label">Nom du fichier :</label>
								<input type="text" class="form-control" id="newFileName" name="newFileName" placeholder="Entrer un nouveau nom de fichier (optionnel)">
							</div>
							<div class="row">
								<div class="col-md-2 col-sm-2">
									<label for="button">Bouton :</label>
								</div>
								<div class="col-md-10 col-sm-10">
									<select name="button" id="button" class="form-select" required>
										<option value="" selected disabled hidden>Choisir un bouton</option>
										{% if (button is defined) and (button is not empty) %}
											<option value="{{button.id}}" selected>{{button.name}}</option>
										{% else %}
											{% for button in buttons %}
												<option value="{{button.id}}">{{button.name}}</option>
											{% endfor %}
										{% endif %}
									</select>
								</div>
							</div>
						</div>
						<div class="d-grid gap-2 d-md-flex justify-content-md-center mt-5">
							<button type="submit" class="btn btn-primary">Charger</button>
						</div>
					</form>
				</div>

				<div class="col-md-6">
					{% if (buttons is defined) and (buttons is not empty) %}
						<div>
							{% for button in buttons %}
								<strong>
									Boutton
									{{ button.name|capitalize }}</strong>
								{% set matchinguploads = uploads|filter(upload => upload.button.id == button.id) %}
								{% if matchinguploads|length > 0 %}
									{% for upload in matchinguploads %}
										<li class="form-control shadow d-flex justify-content-between align-items-center mb-3">
											<a href="{{ path('app_download_file', { 'filename': upload.filename }) }}" class="btn btn-link" target="_blank">
												-
												{{ upload.filename }}
												<span class="visually-hidden">{{ upload.id }}</span>
											</a>
											<a href="{{ path('app_delete_file', { filename: upload.filename, button: upload.button.id }) }}" class="btn btn-danger">
												Supprimer
												<span class="visually-hidden">{{ upload.id }}</span>
											</a>
										</li>
									{% endfor %}
								{% else %}
									<div class="alert alert-danger">
										<a href="{{path('app_base')}}">
											Il n'y a pas de documents disponible pour le bouton
											{{button.name}}
											de la cat√©gorie
											{{button.category.name}}
											de la ligne
											{{button.category.productLine.name}}
											de la zone
											{{button.category.productLine.zone.name}}.
										</a>
									</div>
								{% endif %}
							{% endfor %}
						</div>
					{% else %}
						<div class="alert alert-danger">
							<a href="{{path('app_base')}}">
								Il n'y a pas de documents disponible pour ce bouton.
							</a>
						</div>
					{% endif %}
					{% include 'services/uploads/uploaded_list.html.twig' %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
