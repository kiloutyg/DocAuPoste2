<div class="  align-items-center  text-white bg-secondary my-5 py-4 text-center mydropzone">
	<h5>
		<strong>
			Liste des documents :
		</strong>
	</h5>
	{% set lastZone = null %}
	{% set lastProductLine = null %}
	{% set lastCategory = null %}
	{% set lastButton = null %}

	{% if (button is defined) and (button is not empty) %}
		{# Filter uploads by button #}
		{% set matchinguploads = uploads|filter(upload => upload.button.id == button.id) %}

	{% elseif (category is defined) and (category is not empty) %}
		{# Filter uploads by category #}
		{% set matchinguploads = uploads|filter(upload => upload.button.category.id == category.id) %}

	{% elseif (productLine is defined) and (productLine is not empty) %}
		{# Filter uploads by product line #}
		{% set matchinguploads = uploads|filter(upload => upload.button.category.productLine.id == productLine.id) %}

	{% elseif (zone is defined) and (zone is not empty) %}
		{# Filter uploads by zone #}
		{% set matchinguploads = uploads|filter(upload => upload.button.category.productLine.zone.id == zone.id) %}

	{% else %}
		{# No filter, display all uploads #}
		{% set matchinguploads = uploads %}

	{% endif %}

	{% if matchinguploads|length > 0 %}


		{% for upload in matchinguploads %}

			{% if lastZone != upload.button.category.productLine.zone %}
				{% set lastZone = upload.button.category.productLine.zone %}
				Zone:
				{{ lastZone.name }}
				>
			{% endif %}
			{% if lastProductLine != upload.button.category.productLine %}
				{% set lastProductLine = upload.button.category.productLine %}
				Product Line:
				{{ lastProductLine.name }}
				>
			{% endif %}
			{% if lastCategory != upload.button.category %}
				{% set lastCategory = upload.button.category %}
				Category:
				{{ lastCategory.name }}
				>
			{% endif %}
			<div>
				{% if lastButton != upload.button %}
					{% set lastButton = upload.button %}
					Button:
					{{ lastButton.name }}
					:
				</div>
			{% endif %}

			<li class="form-control shadow d-flex justify-content-between align-items-center mb-3">
				<a href="{{ path('app_download_file', { 'filename': upload.filename }) }}" class="btn btn-link" target="_blank">
					-
					{{ upload.filename }}
					<span class="visually-hidden">{{ upload.id }}</span>
				</a>
				<a href="{{ path('app_delete_file', { filename: upload.filename, button: upload.button.id }) }}" class="btn btn-danger delete-upload">
					Supprimer
					<span class="visually-hidden">{{ upload.id }}</span>
				</a>
			</li>
		{% endfor %}
	{% else %}
		<div class="alert alert-danger">
			<a href="{{path('app_base')}}">
				Il n'y a pas de documents disponible
			</a>
		</div>

	{% endif %}


</div>
